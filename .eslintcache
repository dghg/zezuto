[{"/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/index.tsx":"1","/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/reportWebVitals.ts":"2","/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/pages/Login.tsx":"3","/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/pages/App.tsx":"4","/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/components/Map.tsx":"5","/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/components/Result.tsx":"6","/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/components/PlaceRemover.tsx":"7","/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/components/PlaceAdder.tsx":"8","/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/util/constants.ts":"9","/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/util/f.ts":"10"},{"size":982,"mtime":1606979682107,"results":"11","hashOfConfig":"12"},{"size":425,"mtime":1606917034492,"results":"13","hashOfConfig":"12"},{"size":858,"mtime":1607087045856,"results":"14","hashOfConfig":"12"},{"size":2397,"mtime":1607250937878,"results":"15","hashOfConfig":"12"},{"size":583,"mtime":1607252804905,"results":"16","hashOfConfig":"12"},{"size":776,"mtime":1607090241521,"results":"17","hashOfConfig":"12"},{"size":447,"mtime":1607089266114,"results":"18","hashOfConfig":"12"},{"size":2419,"mtime":1607254200973,"results":"19","hashOfConfig":"12"},{"size":161,"mtime":1607092240814,"results":"20","hashOfConfig":"12"},{"size":1533,"mtime":1607252751463,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"1w50ntr",{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"24"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"24"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/index.tsx",[],["46","47"],"/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/reportWebVitals.ts",[],"/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/pages/Login.tsx",[],"/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/pages/App.tsx",["48"],"import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Map from '../components/Map';\nimport { Button } from '@material-ui/core';\nimport PlaceAdder from '../components/PlaceAdder';\nimport PlaceRemover from '../components/PlaceRemover';\nimport { Redirect } from 'react-router-dom';\nimport {Place} from '../util/types';\nimport {useCookies} from 'react-cookie';\nimport {API_URL} from '../util/constants';\ninterface SelectInfo {\n  place: Place;\n  method: \"add\" | \"remove\";\n}\nconst App_: React.FunctionComponent = () => {\n  const [places, setPlaces] = useState<Place[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [method, setMethod] = useState<\"add\" | \"remove\" | null>(null);\n  const [selectInfo, setSelectInfo] = useState<SelectInfo | null>(null);\n\n  const [cookies] = useCookies();\n\n  const setPlace = async (info: SelectInfo) => {\n    let data;\n    if(info.method === \"add\") {\n      data = JSON.stringify([...places, info.place]);\n    }\n    else {\n      places.splice(places.indexOf(info.place),1);\n      data = places;\n    }\n    \n    const result = await axios.post(API_URL, data);\n    if(result.status === 200) {\n      setPlaces(result.data); // 통채로 교체\n      setMethod(null);\n    }\n    else {\n      // TODO\n    }\n  }\n\n  useEffect(() => {\n    if(selectInfo) {\n      (async () => {\n        await setPlace(selectInfo);\n      })();\n      setSelectInfo(null);\n    }\n  }, [selectInfo]);\n\n  useEffect(() => { // Initial Loading\n    setLoading(true);\n    (async () => {  \n      const result = await axios.get(API_URL);\n      if(result.status === 200) {\n        setPlaces(result.data);\n        setLoading(false);\n      }\n    })();\n  }, []);\n\n  const filtered = places.length ? places.filter((val) => {return val.writer === cookies.name}) : [];\n  return (\n    cookies.name ?\n    <>\n      {loading ? <div>지도를 불러오는 중입니다.</div>:<Map places={places}/>}\n      {method === null ? <><h1>선택해 주세요.</h1><Button onClick={()=>{setMethod(\"add\")}}>추가</Button> {filtered.length ? <Button onClick={()=>{setMethod(\"remove\")}}>삭제</Button> : null }</>: null}\n      {method === \"add\" ? <PlaceAdder places={places} setSelectInfo={setSelectInfo}/> : null}\n      {method === \"remove\" ? <PlaceRemover places={filtered} setSelectInfo={setSelectInfo}/> : null}\n    </>\n    : <Redirect to=\"/\" />\n  )\n\n};\n\nexport default App_;","/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/components/Map.tsx",[],"/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/components/Result.tsx",[],["49","50"],"/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/components/PlaceRemover.tsx",[],"/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/components/PlaceAdder.tsx",["51"],"import React, { useEffect, useState } from 'react';\nimport { useCookies } from 'react-cookie';\nimport Result from './Result';\nimport { Button, Input } from '@material-ui/core';\nimport { Place } from '../util/types';\nimport { checkDistance } from '../util/f';\n\nconst { kakao } = window;\ninterface Props {\n  places: Place[];\n  setSelectInfo: Function;\n}\n\nconst PlaceAdder: React.FunctionComponent<Props> = ({places, setSelectInfo}) => {\n  const [value, setValue] = useState<string>(''); // Form value\n  const [results, setResults] = useState<Array<any> | \"FAIL\">([]); // search result value\n  const [cookies] = useCookies();\n  const [isSearching, setIsSearching] = useState<boolean | null>(null);\n  const searchPlaces = async (keyword: string) => {\n    setValue('');\n    var ps = new kakao.maps.services.Places(); // Create service \n    \n    ps.keywordSearch(keyword, (data: Array<any>, status: any, pagination: any) => {\n      if(keyword !== value) {\n        return;\n      }\n      if(status === kakao.maps.services.Status.OK && data.length) {\n        const inRangePlaces = data.filter(checkDistance);\n        const _ = inRangePlaces.map((val,idx) => {\n          return { \n            x: parseFloat(parseFloat(val.y).toFixed(4)),\n            y: parseFloat(parseFloat(val.x).toFixed(4)),\n            desc: val.place_name as string,\n            writer: cookies.name as string,\n          } as Place// make into array \n        });\n        if(_.length > 0) {\n          setResults(_);\n        }\n        else {\n          setResults(\"FAIL\");\n        }\n        setIsSearching(false);\n      }\n    });\n  }\n  \n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(e.target.value);\n  }\n  const handleSubmit = async (e: React.MouseEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setIsSearching(true);\n    searchPlaces(value);\n    }\n\n  return (\n  <>\n    <h1>{results.length && results !== \"FAIL\" ? \"원하는 장소를 누르면 추가됩니다.\" : \"가고 싶은 곳을 검색해 보세요.\"}</h1>\n    <form onSubmit={handleSubmit}>\n      <Input onChange={handleChange} />\n      <Button>검색</Button>\n    </form>\n    {isSearching ? <h1>검색 중입니다.</h1> : results === \"FAIL\" ? <h1>결과가 존재하지 않습니다. 다시 검색해 주세요.</h1> : <Result places={results} setSelectInfo={setSelectInfo} method=\"add\"/>}\n  </>\n  )\n} // just render children.\n\nexport default PlaceAdder;","/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/util/constants.ts",[],"/Users/donghyeong/Desktop/WORKSPACE/JAVASCRIPT/dd/src/util/f.ts",[],{"ruleId":"52","replacedBy":"53"},{"ruleId":"54","replacedBy":"55"},{"ruleId":"56","severity":1,"message":"57","line":50,"column":6,"nodeType":"58","endLine":50,"endColumn":18,"suggestions":"59"},{"ruleId":"52","replacedBy":"60"},{"ruleId":"54","replacedBy":"61"},{"ruleId":"62","severity":1,"message":"63","line":1,"column":17,"nodeType":"64","messageId":"65","endLine":1,"endColumn":26},"no-native-reassign",["66"],"no-negated-in-lhs",["67"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'setPlace'. Either include it or remove the dependency array.","ArrayExpression",["68"],["66"],["67"],"@typescript-eslint/no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation",{"desc":"69","fix":"70"},"Update the dependencies array to be: [selectInfo, setPlace]",{"range":"71","text":"72"},[1423,1435],"[selectInfo, setPlace]"]